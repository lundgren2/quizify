{"ast":null,"code":"import _regeneratorRuntime from \"/Users/tobiaslundgren/Dev/Projects/socify-client/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/tobiaslundgren/Dev/Projects/socify-client/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport queryString from 'query-string';\nimport axios from 'axios';\nimport config from '../config';\n\nfunction getAccessToken(_x) {\n  return _getAccessToken.apply(this, arguments);\n}\n\nfunction _getAccessToken() {\n  _getAccessToken = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee(queryParams) {\n    var parsed, token, tokens, _token;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            parsed = queryString.parse(queryParams);\n            token = localStorage.getItem('token');\n\n            if (!token) {\n              _context.next = 4;\n              break;\n            }\n\n            return _context.abrupt(\"return\", token);\n\n          case 4:\n            _context.prev = 4;\n            _context.next = 7;\n            return axios.get('http://localhost:8888/callback', {\n              params: {\n                code: parsed.code,\n                redirect_uri: config.REDIRECT_URI\n              }\n            });\n\n          case 7:\n            tokens = _context.sent;\n            _token = tokens.data.access_token;\n            localStorage.setItem('token', _token);\n            return _context.abrupt(\"return\", tokens.data.access_token);\n\n          case 13:\n            _context.prev = 13;\n            _context.t0 = _context[\"catch\"](4);\n            console.log(_context.t0);\n\n          case 16:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, this, [[4, 13]]);\n  }));\n  return _getAccessToken.apply(this, arguments);\n}\n\nexport default getAccessToken;","map":{"version":3,"sources":["/Users/tobiaslundgren/Dev/Projects/socify-client/client/src/utils/getAccessToken.js"],"names":["queryString","axios","config","getAccessToken","queryParams","parsed","parse","token","localStorage","getItem","get","params","code","redirect_uri","REDIRECT_URI","tokens","data","access_token","setItem","console","log"],"mappings":";;AAAA,OAAOA,WAAP,MAAwB,cAAxB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,WAAnB;;SAEeC,c;;;;;;;2BAAf,iBAA8BC,WAA9B;AAAA;;AAAA;AAAA;AAAA;AAAA;AACQC,YAAAA,MADR,GACiBL,WAAW,CAACM,KAAZ,CAAkBF,WAAlB,CADjB;AAEQG,YAAAA,KAFR,GAEgBC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAFhB;;AAAA,iBAGMF,KAHN;AAAA;AAAA;AAAA;;AAAA,6CAIWA,KAJX;;AAAA;AAAA;AAAA;AAAA,mBAOuBN,KAAK,CAACS,GAAN,CAAU,gCAAV,EAA4C;AAC7DC,cAAAA,MAAM,EAAE;AACNC,gBAAAA,IAAI,EAAEP,MAAM,CAACO,IADP;AAENC,gBAAAA,YAAY,EAAEX,MAAM,CAACY;AAFf;AADqD,aAA5C,CAPvB;;AAAA;AAOQC,YAAAA,MAPR;AAaUR,YAAAA,MAbV,GAakBQ,MAAM,CAACC,IAAP,CAAYC,YAb9B;AAcIT,YAAAA,YAAY,CAACU,OAAb,CAAqB,OAArB,EAA8BX,MAA9B;AAdJ,6CAeWQ,MAAM,CAACC,IAAP,CAAYC,YAfvB;;AAAA;AAAA;AAAA;AAiBIE,YAAAA,OAAO,CAACC,GAAR;;AAjBJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,G;;;;AAqBA,eAAejB,cAAf","sourcesContent":["import queryString from 'query-string';\nimport axios from 'axios';\nimport config from '../config';\n\nasync function getAccessToken(queryParams) {\n  const parsed = queryString.parse(queryParams);\n  const token = localStorage.getItem('token');\n  if (token) {\n    return token;\n  }\n  try {\n    let tokens = await axios.get('http://localhost:8888/callback', {\n      params: {\n        code: parsed.code,\n        redirect_uri: config.REDIRECT_URI,\n      },\n    });\n    const token = tokens.data.access_token;\n    localStorage.setItem('token', token);\n    return tokens.data.access_token;\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nexport default getAccessToken;\n"]},"metadata":{},"sourceType":"module"}